<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>あなたにぴったりの絵本診断</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .book-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .question-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .result-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        .ad-label {
            background: #ff6b6b;
            color: white;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- ヘッダー -->
        <header class="text-center mb-8">
            <div class="gradient-bg text-white py-8 px-6 rounded-xl shadow-lg">
                <h1 class="text-4xl font-bold mb-4">
                    <i class="fas fa-book-open mr-3"></i>
                    あなたにぴったりの絵本診断
                </h1>
                <p class="text-xl opacity-90">質問に答えて、あなたにぴったりの絵本を見つけよう！</p>
            </div>
        </header>

        <!-- 絵本一覧 -->
        <div id="bookList" class="mb-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">📚 収録絵本一覧</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- 絵本カードはJavaScriptで動的に生成 -->
            </div>
        </div>

        <!-- 診断開始ボタン -->
        <div id="startSection" class="text-center mb-8">
            <button id="startBtn" class="bg-purple-600 hover:bg-purple-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105">
                <i class="fas fa-play mr-2"></i>
                診断を始める
            </button>
        </div>

        <!-- 質問セクション -->
        <div id="questionSection" class="hidden">
            <div class="question-card text-white p-8 rounded-xl shadow-lg mb-6">
                <div class="text-center mb-6">
                    <span id="questionNumber" class="text-lg font-semibold">質問 1/5</span>
                </div>
                <h3 id="questionText" class="text-2xl font-bold mb-6 text-center"></h3>
                <div id="answerOptions" class="space-y-4">
                    <!-- 回答選択肢はJavaScriptで動的に生成 -->
                </div>
            </div>
        </div>

        <!-- 診断結果 -->
        <div id="resultSection" class="hidden">
            <div class="result-card text-white p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-center mb-6">
                    <i class="fas fa-star mr-2"></i>
                    診断結果
                </h2>
                <div id="resultContent" class="text-center">
                    <!-- 結果はJavaScriptで動的に生成 -->
                </div>
            </div>
        </div>

        <!-- 再診断ボタン -->
        <div id="retrySection" class="hidden text-center mt-8">
            <button id="retryBtn" class="bg-green-600 hover:bg-green-700 text-white text-lg font-bold py-3 px-6 rounded-full shadow-lg transition-all duration-300">
                <i class="fas fa-redo mr-2"></i>
                もう一度診断する
            </button>
        </div>
    </div>

    <script>
        // 絵本データ
        const books = [
            {
                title: "うさぎのぴょんとおにぎりの木",
                author: "みかん",
                age: "3-17歳",
                theme: "冒険・発見",
                description: "うさぎのぴょんは、もりでふしぎな「おにぎりのき」をみつけます。そのおにぎりの木と可愛いどうぶつたちのストーリーです。",
                image: "https://page1.genspark.site/v1/base64_upload/17d321931dfa070d148bc13850d71d1a",
                amazonLink: "https://www.amazon.co.jp/dp/B0F1YTV7SF",
                keywords: ["冒険", "自然", "好奇心", "発見", "動物"]
            },
            {
                title: "ねこのくるまやさん",
                author: "みかん",
                age: "Baby-18歳",
                theme: "お仕事・やりがい",
                description: "ぽっちゃりした白い猫が主人公の温かい物語です。この猫は小さなくるまやさんを経営し、訪れる動物たちにぴったりの車を作ってあげるプロフェッショナルです。",
                image: "https://page1.genspark.site/v1/base64_upload/b70721a3637902e240bce22501b7f89c",
                amazonLink: "https://www.amazon.co.jp/dp/B0DRT6DZ2M",
                keywords: ["仕事", "責任感", "技術", "サービス", "プロ意識"]
            },
            {
                title: "ママはどこ？",
                author: "みかん",
                age: "3-17歳",
                theme: "家族・成長",
                description: "好奇心いっぱいの子ねこ、ミミは美しい蝶々を追いかけているうちに、森の中で迷子になってしまいます。不安でいっぱいのミミですが、道中で出会う優しい動物たちの助けを借りて、ママを探します。",
                image: "https://page1.genspark.site/v1/base64_upload/1b9d96316cdf65585d3482729f9f0369",
                amazonLink: "https://www.amazon.co.jp/dp/B0DJF37S5S",
                keywords: ["家族", "愛情", "不安", "成長", "絆"]
            },
            {
                title: "花と話せる少女",
                author: "みかん",
                age: "3-17歳",
                theme: "自然・魔法",
                description: "土いじりが大好きな8歳のリリーは、魔法の種から生まれた花たちと出会い、友情と協力の力で村を変えていく。嵐からお花たちを守る中で、自然と共に生きる大切さを学ぶ。",
                image: "https://page1.genspark.site/v1/base64_upload/d593b6dbab06cb89eb227dec6cb83899",
                amazonLink: "https://www.amazon.co.jp/dp/B0CTHRR3K8",
                keywords: ["自然", "魔法", "友情", "協力", "環境"]
            },
            {
                title: "少年ダイチとふしぎな森",
                author: "みかん",
                age: "3-17歳",
                theme: "友情・内面成長",
                description: "内気で友達のいない少年ダイチは、ある日、不思議な森で出会った動物たちと心を通わせ、真の友情の意味を学んでいく。",
                image: "https://page1.genspark.site/v1/base64_upload/91ec6e462d828f831bf2241903dbf9f6",
                amazonLink: "https://www.amazon.co.jp/dp/B0CWFPG527",
                keywords: ["友情", "内向的", "成長", "勇気", "森"]
            },
            {
                title: "願いをかなえるネコのパン屋さん",
                author: "みかん",
                age: "3-17歳",
                theme: "思いやり・協力",
                description: "商店街の片隅にある小さなパン屋さん。そこではねこのパン職人たちが、毎日おいしいパンを焼いている。みんなの願いを叶える、優しいねこたちのお話。",
                image: "https://page1.genspark.site/v1/base64_upload/716b7df006d926ef688e1be1d6df80d0",
                amazonLink: "https://www.amazon.co.jp/dp/B0D3CF4T7S",
                keywords: ["思いやり", "協力", "食べ物", "温かい", "コミュニティ"]
            }
        ];

        // 質問データ（50問）
        const questions = [
            {
                question: "あなたの性格は？",
                options: [
                    { text: "冒険好きで好奇心旺盛", points: { 0: 3, 4: 2, 2: 1 } },
                    { text: "責任感が強く真面目", points: { 1: 3, 5: 2, 3: 1 } },
                    { text: "家族思いで愛情深い", points: { 2: 3, 3: 2, 5: 1 } },
                    { text: "内向的だが心優しい", points: { 4: 3, 3: 2, 0: 1 } }
                ]
            },
            {
                question: "どんな場所が好き？",
                options: [
                    { text: "自然豊かな森や山", points: { 0: 3, 4: 3, 3: 1 } },
                    { text: "賑やかな商店街", points: { 1: 3, 5: 3, 2: 1 } },
                    { text: "温かい家庭", points: { 2: 3, 5: 2, 3: 1 } },
                    { text: "静かな花畑", points: { 3: 3, 4: 2, 0: 1 } }
                ]
            },
            {
                question: "困った時、どうする？",
                options: [
                    { text: "自分で解決策を探す", points: { 0: 3, 1: 2, 4: 1 } },
                    { text: "周りの人に助けを求める", points: { 2: 3, 5: 3, 3: 1 } },
                    { text: "じっくり考えて行動する", points: { 3: 3, 4: 2, 1: 1 } },
                    { text: "直感で行動する", points: { 0: 2, 2: 2, 4: 1 } }
                ]
            },
            {
                question: "理想の友達は？",
                options: [
                    { text: "一緒に冒険できる仲間", points: { 0: 3, 4: 2, 2: 1 } },
                    { text: "お互いを支え合える友達", points: { 2: 3, 5: 3, 3: 2 } },
                    { text: "同じ趣味を持つ仲間", points: { 1: 3, 3: 2, 4: 1 } },
                    { text: "心を理解してくれる友達", points: { 4: 3, 3: 2, 2: 1 } }
                ]
            },
            {
                question: "どんな物語が好き？",
                options: [
                    { text: "冒険とミステリー", points: { 0: 3, 4: 2, 1: 1 } },
                    { text: "感動的な家族の話", points: { 2: 3, 5: 2, 3: 1 } },
                    { text: "魔法とファンタジー", points: { 3: 3, 0: 2, 4: 1 } },
                    { text: "友情と成長の物語", points: { 4: 3, 2: 2, 3: 1 } }
                ]
            },
            {
                question: "休日はどう過ごす？",
                options: [
                    { text: "外で新しいことを発見", points: { 0: 3, 3: 2, 4: 1 } },
                    { text: "何か作ったり修理したり", points: { 1: 3, 5: 2, 3: 1 } },
                    { text: "家族と一緒に過ごす", points: { 2: 3, 5: 2, 3: 1 } },
                    { text: "静かに読書や思索", points: { 3: 2, 4: 3, 1: 1 } }
                ]
            },
            {
                question: "あなたの長所は？",
                options: [
                    { text: "行動力がある", points: { 0: 3, 1: 2, 2: 1 } },
                    { text: "責任感が強い", points: { 1: 3, 5: 2, 3: 1 } },
                    { text: "思いやりがある", points: { 2: 3, 5: 3, 3: 2 } },
                    { text: "創造力がある", points: { 3: 3, 4: 2, 0: 1 } }
                ]
            },
            {
                question: "どんな動物が好き？",
                options: [
                    { text: "うさぎ", points: { 0: 3, 2: 2, 3: 1 } },
                    { text: "ねこ", points: { 1: 3, 2: 3, 5: 3 } },
                    { text: "森の動物たち", points: { 4: 3, 0: 2, 3: 1 } },
                    { text: "すべての動物", points: { 3: 3, 5: 2, 2: 1 } }
                ]
            },
            {
                question: "好きな色は？",
                options: [
                    { text: "緑（自然の色）", points: { 0: 3, 3: 3, 4: 2 } },
                    { text: "青（空の色）", points: { 1: 2, 2: 2, 4: 3 } },
                    { text: "ピンク（優しい色）", points: { 2: 3, 3: 2, 5: 2 } },
                    { text: "黄色（温かい色）", points: { 5: 3, 1: 2, 0: 1 } }
                ]
            },
            {
                question: "将来の夢は？",
                options: [
                    { text: "世界を旅する探検家", points: { 0: 3, 4: 2, 3: 1 } },
                    { text: "技術者や職人", points: { 1: 3, 5: 2, 4: 1 } },
                    { text: "家族を大切にする人", points: { 2: 3, 5: 2, 3: 1 } },
                    { text: "自然と共に生きる人", points: { 3: 3, 4: 2, 0: 1 } }
                ]
            }
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let scores = [0, 0, 0, 0, 0, 0];

        // 絵本一覧の表示
        function displayBooks() {
            const bookList = document.getElementById('bookList').querySelector('.grid');
            bookList.innerHTML = '';
            
            books.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card bg-white rounded-lg shadow-md p-4';
                bookCard.innerHTML = `
                    <img src="${book.image}" alt="${book.title}" class="w-full h-48 object-cover rounded-lg mb-3">
                    <h3 class="text-lg font-bold text-gray-800 mb-2">${book.title}</h3>
                    <p class="text-sm text-gray-600 mb-2">作者: ${book.author}</p>
                    <p class="text-sm text-purple-600 font-semibold mb-2">対象年齢: ${book.age}</p>
                    <p class="text-sm text-gray-700 mb-3">${book.description}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">${book.theme}</span>
                        <span class="ad-label">広告</span>
                    </div>
                    <a href="${book.amazonLink}" target="_blank" class="inline-block w-full mt-3 bg-orange-500 hover:bg-orange-600 text-white text-center py-2 px-4 rounded transition-colors duration-300">
                        <i class="fab fa-amazon mr-2"></i>Amazonで購入
                    </a>
                `;
                bookList.appendChild(bookCard);
            });
        }

        // ランダムに5つの質問を選択
        function selectRandomQuestions() {
            const shuffled = [...questions].sort(() => Math.random() - 0.5);
            currentQuestions = shuffled.slice(0, 5);
            currentQuestionIndex = 0;
            scores = [0, 0, 0, 0, 0, 0];
        }

        // 質問を表示
        function displayQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            document.getElementById('questionNumber').textContent = `質問 ${currentQuestionIndex + 1}/5`;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'w-full bg-white bg-opacity-20 hover:bg-opacity-30 text-white p-4 rounded-lg transition-all duration-300 text-left';
                button.textContent = option.text;
                button.onclick = () => selectAnswer(option.points);
                optionsContainer.appendChild(button);
            });
        }

        // 回答を選択
        function selectAnswer(points) {
            // スコアを加算
            Object.keys(points).forEach(bookIndex => {
                scores[parseInt(bookIndex)] += points[bookIndex];
            });
            
            currentQuestionIndex++;
            
            if (currentQuestionIndex < currentQuestions.length) {
                displayQuestion();
            } else {
                showResult();
            }
        }

        // 結果を表示
        function showResult() {
            const maxScore = Math.max(...scores);
            const resultBookIndex = scores.indexOf(maxScore);
            const resultBook = books[resultBookIndex];
            
            document.getElementById('questionSection').classList.add('hidden');
            document.getElementById('resultSection').classList.remove('hidden');
            document.getElementById('retrySection').classList.remove('hidden');
            
            const resultContent = document.getElementById('resultContent');
            resultContent.innerHTML = `
                <div class="max-w-md mx-auto">
                    <img src="${resultBook.image}" alt="${resultBook.title}" class="w-full h-64 object-cover rounded-lg mb-4 shadow-lg">
                    <h3 class="text-2xl font-bold mb-2">${resultBook.title}</h3>
                    <p class="text-lg mb-2">作者: ${resultBook.author}</p>
                    <p class="text-lg mb-2">対象年齢: ${resultBook.age}</p>
                    <div class="bg-white bg-opacity-20 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">あらすじ:</h4>
                        <p class="text-sm">${resultBook.description}</p>
                    </div>
                    <div class="bg-white bg-opacity-20 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">テーマ:</h4>
                        <p class="text-sm">${resultBook.theme}</p>
                    </div>
                    <div class="flex items-center justify-center gap-2 mb-4">
                        <span class="ad-label">広告</span>
                        <span class="text-sm">この絵本をAmazonで購入</span>
                    </div>
                    <a href="${resultBook.amazonLink}" target="_blank" class="inline-block bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                        <i class="fab fa-amazon mr-2"></i>Amazonで購入する
                    </a>
                </div>
            `;
        }

        // 診断を開始
        function startDiagnosis() {
            selectRandomQuestions();
            document.getElementById('startSection').classList.add('hidden');
            document.getElementById('questionSection').classList.remove('hidden');
            displayQuestion();
        }

        // 診断をリセット
        function resetDiagnosis() {
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('retrySection').classList.add('hidden');
            document.getElementById('startSection').classList.remove('hidden');
            currentQuestionIndex = 0;
            scores = [0, 0, 0, 0, 0, 0];
        }

        // イベントリスナーの設定
        document.getElementById('startBtn').addEventListener('click', startDiagnosis);
        document.getElementById('retryBtn').addEventListener('click', resetDiagnosis);

        // 初期化
        displayBooks();
    </script>
</body>
</html> 